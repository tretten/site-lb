const storageKey='theme-preference',onClick=()=>{theme.value=theme.value==='light'?'dark':'light',setPreference()},getColorPreference=()=>localStorage.getItem(storageKey)?localStorage.getItem(storageKey):window.matchMedia('(prefers-color-scheme: dark)').matches?'dark':'light',setPreference=()=>{localStorage.setItem(storageKey,theme.value),reflectPreference()},reflectPreference=()=>{document.firstElementChild.setAttribute('data-theme',theme.value),document.querySelector('#theme-toggle')?.setAttribute('aria-label',theme.value)},theme={value:getColorPreference()};reflectPreference(),window.onload=()=>{reflectPreference(),document.querySelector('#theme-toggle').addEventListener('click',onClick)},window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change',({matches:a})=>{theme.value=a?'dark':'light',setPreference()})